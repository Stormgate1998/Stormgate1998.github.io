<!DOCTYPE html>
<style>
    .topnav{
        overflow: hidden;
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        width: 100%;
        padding: 0px;
        margin: 0px;
        display: flex;
        align-items: center;
    }

    .topnav p{
        float: left;
        color: aqua;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 16px;
        background-color: navy;
    }

</style>
<script>
    /*
     * To make it work:
     * get names of all elements
     * get values of all elements
     * FIGURE OUT IF IT'S AN OBJECT
     * IF SO, BREAK IT IN PIECES
     * display all as elements
     * 
     * 
     * item.addEventListener("onclick", (event)=>
     * { event.target.innerHTML = link to next
     * })
     * 
     * 
     */
    window.addEventListener("load", function () {
       // const myElement = document.querySelector("body");
       // goFetch("/api/monsters/mimic"); 

    });

    //Takes an object, presents a list of all items
    function getList(sheet, addition = "") {
        const myElement = document.getElementById("main");
        //wipePage(myElement);
        var names = Object.values(sheet);
        var properties = Object.keys(sheet);
        let index = 0;
        names.forEach(element => {
            if ((typeof element) == "object") {
                //check API to view discrepencies
                let thing = document.createElement("h3");
                if (properties[index] != 0) {
                thing.innerText = properties[index];
            }
                myElement.appendChild(thing);
                getList(element/*, (addition + "       ")*/);
            } else {
                let item;
                if (properties[index] === "url") {
                    item = document.createElement("a");
                    item.innerText = addition + properties[index] + ': ' + element;
                    item.addEventListener("onclick", (){
                        wipePage(getElementById("main"));
                        goFetch(element);
                    }
                    );

                } else {
                    item = document.createElement("p");
                    item.innerText = addition + properties[index] + ': ' + element;
                }
                    myElement.appendChild(item);
                    
                index++;
            }
        })

    }
    //takes a piece of url, fetches list. If an item is an object, loop. If value is empty, print N/A
    function goFetch(url) {
        let source = "https://www.dnd5eapi.co" + url;

        fetch(source)
            .then((result) => result.json())
            .then((sheet) => {
                getList(sheet);
            });
                }
    //
    //given an element, systematically removes all children from it
    function wipePage(subject) {
        while (subject.firstChild) {
            subject.removeChild(subject.lastChild);
        }
    }
    //takes any string and checks for appropriate uppercase. Removes _ as well
    function modInput(stringIn) {

    }

    //url function
    //if properties[index] == url
    //add an event listener onclick.
    //triggers goFetch with included url.
</script>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dnd final project</title>
</head>
<body>
    <div class="topnav">
        <p class="classes"><a onclick="wipePage(getElementById('main')); goFetch('/api/classes')">Classes</a></p>
        <p class="feats"><a onclick="goFetch('/api/feats')">Feats</a></p><p class="feats">Ability Scores</p>
        <p class="feats">Alignments</p>
        <p class="feats">Backgrounds</p>
        <p class="feats">Damage Types</p>
        <p class="feats">Conditions</p>
        <p class="feats">Equipment</p>
        <p class="feats">Equipment Categories</p>
        <p class="feats">Features</p>
        <p class="feats">Languages</p>
        <p class="feats">Magic Items</p>
        <p class="feats">Magic Schools</p>
        <p class="feats">Monsters</p>
        <p class="feats">Proficiencies</p>
        <p class="feats">Races</p>
        <p class="feats">Rule Sections</p>
        <p class="feats">Rules</p>
        <p class="feats">Skills</p>
        <p class="feats">Spells</p>
        <p class="feats">Subclasses</p>
        <p class="feats">Subraces</p>
        <p class="feats">Traits</p>
        <p class="feats">Weapon Properties</p>
    </div>
    <div id="main">
    </div>
</body>
</html>