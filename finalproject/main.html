<!DOCTYPE html>
<style>
    .topnav{
        overflow: hidden;
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        width: 100%;
        padding: 0px;
        margin: 0px;
        display: flex;
        align-items: center;
    }

    .topnav p{
        float: left;
        color: aqua;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 16px;
        background-color: navy;
    }

</style>
<script>
    function menubar(url) {
        wipePage(document.getElementById('main')); 
        goFetch(url);
    }
    /*
     * To make it work:
     * get names of all elements
     * get values of all elements
     * FIGURE OUT IF IT'S AN OBJECT
     * IF SO, BREAK IT IN PIECES
     * display all as elements
     * 
     * 
     * item.addEventListener("onclick", (event)=>
     * { event.target.innerHTML = link to next
     * })
     * 
     * 
     */
    window.addEventListener("load", function () {
       // const myElement = document.querySelector("body");
       // goFetch("/api/monsters/mimic"); 

    });

    //Takes an object, presents a list of all items
    function getList(sheet, addition = "") {
        const myElement = document.getElementById("main");
        //wipePage(myElement);
        var names = Object.values(sheet);
        var properties = Object.keys(sheet);
        let index = 0;
        names.forEach(element => {
            if ((typeof element) == "object") {
                //check API to view discrepencies
                let thing = document.createElement("h3");
                if (properties[index] != 0) {
                thing.innerText = properties[index];
            }
                myElement.appendChild(thing);
                getList(element/*, (addition + "       ")*/);
            } else {
                let item;
                let item2;
                element = String(element);
                if (element.includes("/")) {
                    item = document.createElement("p");
                    item2 = document.createElement("a");
                    item2.innerText = "To learn more, click here";
                    item2.addEventListener("click", (event) => {
                        wipePage(document.getElementById("main"));
                        console.log(element);
                        goFetch(element);
                    }
                        
                    );
                    item.appendChild(item2);
                } else {
                    item = document.createElement("p");
                    item.innerText = addition + properties[index] + ': ' + element;
                }
                    myElement.appendChild(item);
                    
                index++;
            }
        })

    }
    //takes a piece of url, fetches list. If an item is an object, loop. If value is empty, print N/A
    function goFetch(url) {
        let source = "https://www.dnd5eapi.co" + url;

        fetch(source)
            .then((result) => result.json())
            .then((sheet) => {
                getList(sheet);
            });
                }
    //
    //given an element, systematically removes all children from it
    function wipePage(subject) {
        while (subject.firstChild) {
            subject.removeChild(subject.lastChild);
        }
    }
    //takes any string and checks for appropriate uppercase. Removes _ as well
    function modInput(stringIn) {

    }

    //url function
    //if properties[index] == url
    //add an event listener onclick.
    //triggers goFetch with included url.
</script>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dnd final project</title>
</head>
<body>
    <div class="topnav">
        <ul class="mainmenu">
            <li class="menuitem">
                <a tabindex="0">Character Information</a>
                <ul>
                    <li>Feats</li>
                    <li></li>
                </ul>
            </li>
            <li class="menuitem"></li>

        </ul>
        <p><a onclick="menubar('/api/classes')">Classes</a></p>
        <p><a onclick="menubar('/api/feats')">Feats</a></p>
        <p><a onclick="menubar('/api/ability-scores')">Ability Scores</a></p>
        <p><a onclick="menubar('/api/alignments')">Alignments</a></p>
        <p><a onclick="menubar('/api/backgrounds')">Backgrounds</a></p>
        <p><a onclick="menubar('/api/damage-types')">Damage Types</a></p>
        <p><a onclick="menubar('/api/conditions')">Conditions</a></p>
        <p><a onclick="menubar('/api/equipment')">Equipment</a></p>
        <p><a onclick="menubar('/api/equipment-categories')">Equipment Categories</a></p>
        <p><a onclick="menubar('/api/features')">Features</a></p>
        <p><a onclick="menubar('/api/languages')">Languages</a></p>
        <p><a onclick="menubar('/api/magic-items')">Magic Items</a></p>
        <p><a onclick="menubar('/api/magic-schools')">Magic Schools</a></p>
        <p><a onclick="menubar('/api/monsters')">Monsters</a></p>
        <p><a onclick="menubar('/api/proficiencies')">Proficiencies</a></p>
        <p><a onclick="menubar('/api/races')">Races</a></p>
        <p><a onclick="menubar('/api/rule-sections')">Rule Sections</a></p>
        <p><a onclick="menubar('/api/rules')">Rules</a></p>
        <p><a onclick="menubar('/api/skills')">Skills</a></p>
        <p><a onclick="menubar('/api/spells')">Spells</a></p>
        <p><a onclick="menubar('/api/subclasses')">Subclasses</a></p>
        <p><a onclick="menubar('/api/subraces')">Subraces</a></p>
        <p><a onclick="menubar('/api/traits')">Traits</a></p>
        <p><a onclick="menubar('/api/weapon-properties')">Weapon Properties</a></p>
    </div>
    <div id="main">
        <p> Click anywhere to start navigating</p>
    </div>
</body>
<!--
Rewrite menu into lists
    one list for main display
    each one may or may not have relevant sublists 
    use tutorial for formatting

-->
</html>
